<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—É–¥–∏–æ –†–µ–¥–∞–∫—Ç–æ—Ä | PRISMA</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .upload-area {
            border: 2px dashed #ccc;
            padding: 30px;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.2s;
            margin-bottom: 20px;
            display: block;
        }
        .upload-area:hover { border-color: var(--accent); background: rgba(40,167,69,0.05); }
        
        canvas {
            width: 100%;
            height: 120px;
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-bottom: 5px; /* –£–º–µ–Ω—å—à–∏–ª –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã —Ü–∏—Ñ—Ä—ã –±—ã–ª–∏ –±–ª–∏–∂–µ */
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }

        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–π–º–ª–∞–π–Ω–∞ */
        .timeline-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-muted);
            font-family: monospace;
            padding: 0 5px;
            margin-bottom: 15px;
        }

        .controls-panel {
            opacity: 0.5; 
            pointer-events: none;
            transition: opacity 0.3s;
        }
        .controls-panel.active { opacity: 1; pointer-events: all; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–∑—É–Ω–∫–æ–≤ –æ–±—Ä–µ–∑–∫–∏ */
        .trim-group {
            background: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .time-inputs {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 13px;
            font-weight: bold;
        }
        .dual-range {
            position: relative;
            height: 20px;
        }
        .dual-range input[type="range"] {
            position: absolute;
            width: 100%;
            pointer-events: none;
            background: none;
            appearance: none;
            -webkit-appearance: none;
            z-index: 2;
        }
        /* –î–µ–ª–∞–µ–º –ø–æ–ª–∑—É–Ω–æ–∫ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º */
        .dual-range input[type="range"]::-webkit-slider-thumb {
            pointer-events: auto;
            appearance: none;
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent);
            border-radius: 50%;
            cursor: pointer;
            margin-top: -6px;
            border: 2px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        #trimEnd::-webkit-slider-thumb {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calculator">
            <h1>‚úÇÔ∏è –ê—É–¥–∏–æ –ö–∞—Ç—Ç–µ—Ä</h1>
            <p>–û–±—Ä–µ–∑–∞–π—Ç–µ —Ç—Ä–µ–∫, –º–µ–Ω—è–π—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ.</p>

            <label class="upload-area">
                <input type="file" id="fileInput" accept="audio/*" style="display:none">
                <div style="font-size:30px; margin-bottom:10px;">üìÇ</div>
                <span id="fileName">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</span>
            </label>

            <!-- –ö–∞–Ω–≤–∞—Å –∏ –¢–∞–π–º–ª–∞–π–Ω -->
            <canvas id="waveform" width="800" height="120"></canvas>
            <div class="timeline-labels">
                <span>0.0s</span>
                <span id="totalDurationLabel">0.0s</span>
            </div>

            <div id="controlsPanel" class="controls-panel">
                
                <div class="trim-group">
                    <label style="margin-bottom:10px; display:block;">‚úÇÔ∏è –û–±—Ä–µ–∑–∫–∞ (–ù–∞—á–∞–ª–æ / –ö–æ–Ω–µ—Ü)</label>
                    <div class="time-inputs">
                        <span id="startText" style="color:var(--accent)">0.0s</span>
                        <span id="endText" style="color:#dc3545">0.0s</span>
                    </div>
                    <div class="dual-range">
                        <input type="range" id="trimStart" min="0" max="100" value="0" step="0.1">
                        <input type="range" id="trimEnd" min="0" max="100" value="100" step="0.1">
                    </div>
                </div>

                <div class="input-group">
                    <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å: <span id="volValue">100%</span></label>
                    <input type="range" id="volRange" min="0" max="200" value="100">
                </div>

                <div class="input-group">
                    <label>–°–∫–æ—Ä–æ—Å—Ç—å: <span id="speedValue">1.0x</span></label>
                    <input type="range" id="speedRange" min="0.5" max="2.0" step="0.1" value="1.0">
                </div>

                <div style="display:flex; gap:15px; margin-top:20px;">
                    <button id="btnPlay" class="btn-secondary">‚ñ∂Ô∏è Play (Preview)</button>
                    <button id="btnStop" class="btn-secondary" style="background:#dc3545">‚èπ Stop</button>
                </div>

                <hr style="margin: 25px 0; border:0; border-top:1px solid #ddd;">
                
                <button id="btnExport">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–µ</button>
            </div>
        </div>
    </div>

    <script src="../main.js"></script>
    <script src="script.js"></script>
</body>
</html>