<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="üíé PRISMA | 30+ –ü–æ–ª–µ–∑–Ω—ã—Ö –°–µ—Ä–≤–∏—Å–æ–≤">
    
    <meta property="og:description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã, —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ –∂–∏–∑–Ω–∏. BMI, ROAS, QR-–∫–æ–¥—ã, –ó–≤—É–∫–∏ –¥–ª—è —Ñ–æ–∫—É—Å–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ.">
    
    <meta property="og:image" content="https://driverstudio.github.io/my-calculator/assets/og-preview.jpg">
    
    <meta property="og:type" content="website">
    
    <meta property="og:url" content="https://driverstudio.github.io/my-calculator/">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="üíé PRISMA">
    <meta name="twitter:image" content="https://driverstudio.github.io/my-calculator/assets/og-preview.jpg">
    <link rel="stylesheet" href="style.css">
    <style>
        /* –°–µ—Ç–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π */
        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .tool-card {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            text-decoration: none;
            color: #333;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
            border-color: #28a745;
        }

        .tool-icon { font-size: 40px; margin-bottom: 5px; }
        .tool-name { font-weight: bold; font-size: 18px; }
        .tool-desc { font-size: 13px; color: #777; }
        
        .hidden { display: none !important; }
    </style>
</head>

<body>
    <div class="container">
        <div style="width: 100%;">
            <h1 style="margin-bottom: 10px;" data-i18n="home.title">üíé PRISMA</h1>
            <p style="margin-bottom: 30px; color: #666;" data-i18n="home.subtitle">
                –ö–æ–ª–ª–µ–∫—Ü–∏—è –∏–∑ 29 –ø–æ–ª–µ–∑–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏ –∂–∏–∑–Ω–∏.
            </p>
            <input type="text" id="searchInput" class="search-box" placeholder="üîç –ù–∞–π—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç..." data-i18n="home.search_placeholder">
            <div id="ad-banner-top" class="ad-slot"></div>
            <div id="catalog-root"></div>
            <div id="noResults" style="display:none; text-align:center; padding: 40px; color:#777;" data-i18n="home.no_results">
                ü§∑‚Äç‚ôÇÔ∏è –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.
            </div>
        </div>
    </div>
    <script src="main.js"></script>
    <script>
    const root = document.getElementById('catalog-root');
    const searchInput = document.getElementById('searchInput');
    const noResults = document.getElementById('noResults');

    // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    // –ü—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥ –≤ JSON –ø–æ –∫–ª—é—á—É app.id + ".title" (–∏–ª–∏ –∫–∞–∫ —É —Ç–µ–±—è –≤ JSON)
    // –ï—Å–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ app.name –∏–∑ main.js
    function getAppName(app) {
        if (window.I18N && window.I18N[currentLang] && window.I18N[currentLang][app.id]) {
            // –í —Ç–≤–æ–µ–º JSON –∫–ª—é—á–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ, –ø–æ—ç—Ç–æ–º—É –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –∫–ª—é—á –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞, 
            // –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ö–æ–∂ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫, –ò–õ–ò –ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑ main.js, 
            // –µ—Å–ª–∏ JSON –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤.
            
            // –í–ê–†–ò–ê–ù–¢: –ï—Å–ª–∏ —Ç—ã –¥–æ–±–∞–≤–∏—à—å –≤ JSON –∫–ª—é—á "title" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
            // return window.I18N[currentLang][app.id]['title'] || app.name;
            
            // –ü–û–ö–ê –ß–¢–û (–¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã): –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å, 
            // —Ç–∞–∫ –∫–∞–∫ –≤ —Ç–≤–æ–µ–º JSON –Ω–µ—Ç —á–∏—Å—Ç—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Å–µ—Ä–≤–∏—Å–æ–≤, —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö.
            // –†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å –≤ JSON –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∫–ª—é—á "_title": "–ù–∞–∑–≤–∞–Ω–∏–µ"
            
            const serviceData = window.I18N[currentLang][app.id];
            if (serviceData && serviceData['_title']) {
                return serviceData['_title'];
            }
        }
        return app.name;
    }
    
    function getCategoryName(catKey) {
        if (window.I18N && window.I18N[currentLang] && window.I18N[currentLang]['categories']) {
            return window.I18N[currentLang]['categories'][catKey] || catKey;
        }
        // –§–æ–ª–ª–±—ç–∫, –µ—Å–ª–∏ JSON –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è
        const RU_CATS = {
            'finance': 'üí∞ –§–∏–Ω–∞–Ω—Å—ã', 'health': 'üíä –ó–¥–æ—Ä–æ–≤—å–µ',
            'work': 'üíª –†–∞–±–æ—Ç–∞ & IT', 'tools': 'üõ† –£—Ç–∏–ª–∏—Ç—ã', 'fun': 'üéÆ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è'
        };
        return RU_CATS[catKey] || '–†–∞–∑–Ω–æ–µ';
    }

    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞)
    window.renderCatalog = function() {
        root.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–µ–µ
        
        const uniqueCats = [...new Set(APPS.map(app => app.category))];

        uniqueCats.forEach(catKey => {
            const section = document.createElement('div');
            section.className = 'category-section';
            section.id = `cat-${catKey}`;

            const title = document.createElement('div');
            title.className = 'category-title';
            title.innerText = getCategoryName(catKey);
            section.appendChild(title);

            const grid = document.createElement('div');
            grid.className = 'catalog-grid';

            const catApps = APPS.filter(app => app.category === catKey);

            catApps.forEach(app => {
                const card = document.createElement('a');
                card.className = 'tool-card';
                card.href = `./${app.id}/index.html`;
                
                const localizedName = getAppName(app);
                
                // –î–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª –∏ –ø–µ—Ä–µ–≤–æ–¥
                card.setAttribute('data-keywords', `${localizedName} ${app.name} ${app.id}`.toLowerCase());

                // –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–û—Ç–∫—Ä—ã—Ç—å"
                let openText = '–û—Ç–∫—Ä—ã—Ç—å ‚Üí';
                if(window.I18N && window.I18N[currentLang] && window.I18N[currentLang]['home']) {
                     openText = window.I18N[currentLang]['home']['open_btn'];
                }

                card.innerHTML = `
                    <div class="tool-icon">${app.icon}</div>
                    <div class="tool-name">${localizedName}</div>
                    <div class="tool-desc">${openText}</div>
                `;
                grid.appendChild(card);
            });

            section.appendChild(grid);
            root.appendChild(section);
        });
        
        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Spotlight —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        if(typeof initSpotlight === 'function') initSpotlight();
    };

    // –ñ–∏–≤–æ–π –ø–æ–∏—Å–∫
    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        const cards = document.querySelectorAll('.tool-card');
        const sections = document.querySelectorAll('.category-section');
        let totalVisible = 0;

        cards.forEach(card => {
            const keywords = card.getAttribute('data-keywords');
            if (query === '' || keywords.includes(query)) {
                card.classList.remove('hidden');
            } else {
                card.classList.add('hidden');
            }
        });

        sections.forEach(section => {
            const visibleCards = section.querySelectorAll('.tool-card:not(.hidden)');
            if (visibleCards.length > 0) {
                section.classList.remove('hidden');
                totalVisible++;
            } else {
                section.classList.add('hidden');
            }
        });

        noResults.style.display = totalVisible === 0 ? 'block' : 'none';
    });

    // –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä (–µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥—ã –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å, –æ—Ç—Ä–∏—Å—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç, 
    // –∞ –ø–æ—Ç–æ–º initTranslations –≤—ã–∑–æ–≤–µ—Ç renderCatalog –µ—â–µ —Ä–∞–∑)
    renderCatalog();
</script>
</body>

</html>